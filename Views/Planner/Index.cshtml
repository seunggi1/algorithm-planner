@using algorithm_planner.Controllers
@model List<PlannerModel>
@{
    ViewData["Title"] = "Index";
}
<div class="sidebar">
    <header>Type</header>
    <ul>
        @foreach (var type in Enum.GetValues<EPlanner>())
        {
            <li class="sidebar-types" data-type="@type.ToString("d")">
                <span>
                    @type (@Model.Count(t => t.Type == type))
                </span>
            </li>
        }
    </ul>
</div>

<h1>학습 기록장</h1>
<div class="m-2 planner-form">
    
    <select class="form-control-sm algo-type">
        <option selected disabled>Category</option>
        @foreach (var type in Enum.GetValues<EPlanner>())
        {
            <option value="@type.ToString("d")">@type</option>
        }
    </select>
    <input class="form-control algo-name" type="text" value="" placeholder="Title" />
    <input class="form-control algo-url" type="text" value="" placeholder="URL" />
    <button class="btn btn-sm btn-primary">Save</button>
</div>

<div class="planner-list">
    @foreach (var type in Enum.GetValues<EPlanner>())
    {
        var models = Model.Where(p => Enum.Parse<EPlanner>(p.Type.ToString()) == type);
        if(models.Count() == 0)
        {
            continue;
        }
        <ul class="planner-types d-none" data-type="@type.ToString("d")">
            @foreach (var item in models)
            {
                <li data-id="@item.Id.ToString()">
                    <div>
                        <a href="@item.URL" target="_blank">@item.Name</a>
                    </div>
                    <div>
                        @item.Date.ToShortDateString()
                        <button style="border:none;background:none" class="btn-sm btn-update-modal">
                            <i class="fa-solid fa-pen"></i>
                        </button>
                    </div>                    
                </li>
            }
        </ul>
    }
</div>

<partial name="~/Views/Component/Modal.cshtml" />
<script src="~/js/planner.js" defer asp-append-version="true"></script>